var LocalDB=function(t){this.cityCode=t,this.stationStorageName="station-"+this.cityCode,this.recentlyStationStorageName="recently-station-"+this.cityCode,this.busStorageName="bus-"+this.cityCode,this.recentlyBusStorageName="recently-bus-"+this.cityCode,this.maxRecentlyCount=10};LocalDB.prototype.load=function(t){var e=null,o=[];try{e=localStorage.getItem(t),o=e?JSON.parse(e):[]}catch(t){o=[]}return o},LocalDB.prototype.save=function(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(t){}},LocalDB.prototype.storeStations=function(t){this.save(this.stationStorageName,t)},LocalDB.prototype.getStations=function(){return this.load(this.stationStorageName)},LocalDB.prototype.getStationIndex=function(t){for(var e=this.getStations(),o=-1,s=0;s<e.length;s++)if(e[s].code===t){o=s;break}return o},LocalDB.prototype.removeStation=function(t){try{var e=this.getStationIndex(t);if(e>=0){var o=this.getStations();o.splice(e,1),this.storeStations(o)}}catch(t){}},LocalDB.prototype.addStation=function(t,e,o,s){try{if(this.getStationIndex(t)<0){var a=this.getStations();a.push({code:t,name:e,link:o,direction:s}),this.storeStations(a)}}catch(t){}},LocalDB.prototype.storeRecentlyStations=function(t){this.save(this.recentlyStationStorageName,t)},LocalDB.prototype.getRecentlyStations=function(){return this.load(this.recentlyStationStorageName)},LocalDB.prototype.addRecentlyStation=function(t,e,o,s){try{var a=[];a.push({code:t,name:e,link:o,direction:s});var n=this.getRecentlyStations();for(var i in n){if(a.length>=this.maxRecentlyCount)break;n[i].code!==t&&a.push(n[i])}this.storeRecentlyStations(a)}catch(t){}},LocalDB.prototype.storeBuses=function(t){this.save(this.busStorageName,t)},LocalDB.prototype.getBuses=function(){return this.load(this.busStorageName)},LocalDB.prototype.getBusIndex=function(t){for(var e=this.getBuses(),o=-1,s=0;s<e.length;s++)if(e[s].code===t){o=s;break}return o},LocalDB.prototype.removeBus=function(t){try{var e=this.getBusIndex(t);if(e>=0){var o=this.getBuses();o.splice(e,1),this.storeBuses(o)}}catch(t){}},LocalDB.prototype.addBus=function(t,e,o,s){try{if(this.getBusIndex(t)<0){var a=this.getBuses();a.push({code:t,name:e,link:o,route:s}),this.storeBuses(a)}}catch(t){}},LocalDB.prototype.storeRecentlyBuses=function(t){this.save(this.recentlyBusStorageName,t)},LocalDB.prototype.getRecentlyBuses=function(){return this.load(this.recentlyBusStorageName)},LocalDB.prototype.addRecentlyBus=function(t,e,o,s){try{var a=[];a.push({code:t,name:e,link:o,route:s});var n=this.getRecentlyBuses();for(var i in n){if(a.length>=this.maxRecentlyCount)break;n[i].code!==t&&a.push(n[i])}this.storeRecentlyBuses(a)}catch(t){}};
