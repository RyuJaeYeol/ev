$(function(){var t=$("#cityCode").val(),a=new LocalDB(t),i=function(){var t=$(this).data("favorite");if(t){!$(this).is(".active")?("bus"===t.type?a.addBus(t.data.code,t.data.name,t.data.link,t.data.route):"station"===t.type&&a.addStation(t.data.code,t.data.name,t.data.link,t.data.direction),$(this).addClass("active")):("bus"===t.type?a.removeBus(t.data.code):"station"===t.type&&a.removeStation(t.data.code),$(this).removeClass("active"))}},n=null,o=null,s=a.getBuses(),e=$("#busList");if(s.length>=1)for(var l in s)n="",n+='<li class="item has-action">',n+='   <a class="box-link" href="'+s[l].link+'">'+s[l].name,n+='       <small class="desc">'+s[l].route+"</small>",n+="   </a>",n+='   <div class="row-actions"><button type="button" class="icon-button primary-favorite active">&nbsp;</button></div>',n+="</li>",o=$(n),o.find("button.icon-button").data("favorite",{type:"bus",data:s[l]}),o.find("button.icon-button").click(i),o.appendTo(e);else n='<li class="item empty">등록없음</li>',$(n).appendTo(e);e.removeClass("loading");var d=a.getStations(),c=$("#stationList");if(d.length>=1)for(var r in d)n="",n+='<li class="item has-action">',n+='   <a class="box-link" href="'+d[r].link+'">'+d[r].name,n+='       <small class="desc">'+d[r].direction+"</small>",n+="   </a>",n+='   <div class="row-actions"><button type="button" class="icon-button primary-favorite active">&nbsp;</button></div>',n+="</li>",o=$(n),o.find("button.icon-button").data("favorite",{type:"station",data:d[r]}),o.find("button.icon-button").click(i),o.appendTo(c);else n='<li class="item empty">등록없음</li>',$(n).appendTo(c);c.removeClass("loading")});
